{% extends 'base.html' %}

{% macro video_frame(slug) %}
<iframe width="560" height="315" src="https://www.youtube.com/embed/{{ slug }}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
{% endmacro %}

{% macro link_list(items) %}
<ul class="board">
{% for d in items %}
{% set name_text = d['name_text'] %}
{% set description_text = d['description_text'] %}
{% set asset_uri = d['asset_uri'] %}
{% set video_uri = d['video_uri'] %}
<li>{% if asset_uri %}<a href="{{ asset_uri }}" target="_blank">{% endif %}{{ name_text }}{% if asset_uri %}</a>{% endif %}{% if name_text and description_text %}: {% endif %}{{ description_text }}{% if video_uri %} [<a href="{{ video_uri }}" target="_blank">video</a>]{% endif %}</li>
{% endfor %}
</ul>
{% endmacro %}

{% block head_html %}
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VP9T2V7B17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-VP9T2V7B17');
</script>
<title>{{ title_text }}</title>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="{{ description_text }}">
<style>
header {
  display: flex;
  gap: 8px;
  flex-wrap: wrap;
  justify-content: space-between;
  margin-bottom: 32px;
}
header > nav {
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}
main, footer {
  max-width: 768px;
  margin: auto;
}
h1 {
  font-size: xxx-large;
}
img {
  max-width: 100%;
}
iframe {
  display: block;
  margin: 0 auto;
  max-width: 100%;
}
.board {
  list-style: none;
  padding: 0;
}
.board li:not(:last-child) {
  margin-bottom: 1em;
}
.calendly-inline-widget {
  height: 600px;
}
@media (min-width: 666px) {
  .calendly-inline-widget {
    height: 740px;
  }
}
#brand {
  height: 1.5em;
  max-width: 100%;
  transform: translate(0, -2px);
}
</style>
{% endblock %}

{% block header_html %}
<nav>
<a href="{{ brand['asset_uri'] }}"><img id="brand" src="{{ brand['image_uri'] }}" loading="lazy"></a>
</nav>
<nav>
<a href="https://crosscompute.net">Scripts</a>
</nav>
{% endblock %}

{% block main_html %}
<h1>{{ headline_text }}</h1>

{{ pitch_html | safe }}

{{ video_frame(demo_slug) }}

{{ services_html | safe }}

{{ link_list(updates) }}

{{ sessions_html | safe }}
{% endblock %}

{% block footer_html %}
{{ link_list(links) }}
{% endblock %}
