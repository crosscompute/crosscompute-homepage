{% extends 'base.html' %}

{% block head_html %}
<script async src="https://www.googletagmanager.com/gtag/js?id=G-VP9T2V7B17"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag() { dataLayer.push(arguments); }
gtag('js', new Date());
gtag('config', 'G-VP9T2V7B17');
</script>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="{{ description }}">
<title>{{ title }}</title>
<style>
section h2 {
  display: flex;
  justify-content: space-between;
}
.carousel {
  display: flex;
  flex-flow: row wrap;
  gap: 8px;
  list-style: none;
  padding-left: 0;
  justify-content: space-evenly;
}
.seat {
  padding: 16px;
  border-radius: 8px;
  display: flex;
  flex-direction: column;
  justify-content: space-between;
  gap: 8px;
  width: 240px;
}
.seat img {
  width: 100%;
}
.info {
  height: 48px;
  display: flex;
  justify-content: center;
  flex-direction: column;
}
.name {
  text-align: center;
  font-size: large;
  font-weight: bold;
}
.description {
  flex: 1;
}
.panel {
  display: flex;
  justify-content: space-around;
}
#menu img {
  max-width: 160px;
}
#menu ul {
  list-style: none;
  padding-left: 0;
  display: flex;
  gap: 16px;
  flex-wrap: wrap;
}
#widgets .seat {
  background: #fadbd8;
}
#websites .seat {
  background: #d6eaf8;
}
#posts .seat {
  background: #e8e8e8;
}
#links ul, #acknowledgments ul {
  list-style: none;
  padding-left: 0;
  flex-wrap: wrap;
}
#links ul {
  display: flex;
  gap: 16px;
}
#acknowledgments ul {
  display: none;
  gap: 8px;
}
@media only screen and (min-width: 768px) {
  main {
    max-width: calc(100vw - 160px - 16px - 16px);
  }
  section h2 a {
    display: none;
  }
  #menu {
    max-width: 160px;
    position: fixed;
    right: 8px;
    padding: 8px;
  }
  #menu ul {
    display: block;
    line-height: 2em;
  }
}
</style>
{% endblock %}

{% block header_html %}
<nav id="menu">
<a href="{{ brand['asset_uri'] }}"><img class="brand" src="{{ brand['image_uri'] }}" loading="lazy"></a>
<ul>
    <li><a href="#news">News</a></li>
    <li><a href="#widgets">Widgets</a></li>
    <li><a href="#websites">Websites</a></li>
    <li><a href="#posts">Posts</a></li>
    <li><a href="#links">Links</a></li>
    <li><a href="#accomplishments">Accomplishments</a></li>
    <li><a href="#acknowledgments">Acknowledgements</a></li>
</ul>
</nav>
{% endblock %}

{% block main_html %}
<section id="news">
<h1>{{ title }}</h1>
{% for new in news %}
<p>{{ new['description'] }}</p>
{% endfor %}
</section>

<section id="widgets">
<h2>Widgets</h2>
<ul class="carousel">
{% for widget in widgets %}
  {% set video_uri = widget['video_uri'] %}
  <li class="seat">
    <div class="info">
      <div class="name">{{ widget['name'] }}</div>
    </div>
    <img src="{{ widget['image_uri'] }}">
    <div class="description">{{ widget['description'] }}</div>
    <div class="panel">
    {% if video_uri %}
      <a href="{{ video_uri }}">Watch</a>
    {% endif %}
      <a href="{{ widget['asset_uri'] }}">Visit</a>
    </div>
  </li>
{% endfor %}
</ul>
</section>

<section id="websites">
<h2>Websites</h2>
<ul class="carousel">
{% for website in websites %}
  {% set video_uri = website['video_uri'] %}
  <li class="seat">
    <div class="info">
      <div class="name">{{ website['name'] }}</div>
    </div>
    <img src="{{ website['image_uri'] }}">
    <div class="description">{{ website['description'] }}</div>
    <div class="panel" style='display:flex'>
    {% if video_uri %}
      <a href="{{ video_uri }}">Watch</a>
    {% endif %}
      <a href="{{ website['asset_uri'] }}">Visit</a>
    </div>
  </li>
{% endfor %}
</ul>
</section>

<section id="posts">
<h2>Posts</h2>
<ul class="carousel">
{% for post in posts %}
  <li class="seat">
    <div class="info">
      <div class="name">{{ post['name'] }}</div>
    </div>
    <img src="{{ post['image_uri'] }}">
    <div class="description">{{ post['description'] }}</div>
    <div class="panel" style='display:flex'>
      <a href="{{ post['asset_uri'] }}">Visit</a>
    </div>
  </li>
{% endfor %}
</ul>
</section>

<section id="links">
<h2>Links</h2>
<ul>
{% for link in links %}
<li><a href="{{ link['asset_uri'] }}">{{ link['name'] }}</a></li>
{% endfor %}
</ul>
</section>

<section id="accomplishments">
<h2>Accomplishments</h2>
<ul>
{% for accomplishment in accomplishments %}
  <li>{{ accomplishment['description'] }}</li>
{% endfor %}
</ul>
</section>

<section id="acknowledgments">
<h2><a href="#acknowledgments">Acknowledgments</a></h2>
<ul>
{% for acknowledgment in acknowledgments %}
<li><a href="{{ acknowledgment['asset_uri'] }}">{{ acknowledgment['name'] }}</a></li>
{% endfor %}
</ul>
</section>
{% endblock %}

{% block body_js %}
document.getElementById('acknowledgments').addEventListener('click', function() {
  this.getElementsByTagName('ul')[0].style.display = 'flex';
});
for (const x of document.querySelectorAll('section h2')) {
  x.innerHTML += '<a href="#">Top</a>';
}
{% endblock %}
